<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SYNCHRO – Score Emocional</title>

<link rel="manifest" href="manifest.json">

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f5f5f5;
    text-align: center;
}
header {
    padding: 40px 0;
}
.logo {
    width: 160px;
    height: auto;
    margin: 20px 0;
    cursor: pointer;
}
h1 {
    margin: 0;
    font-size: 32px;
    font-weight: bold;
}
h2 {
    margin: 0;
    font-size: 20px;
    font-weight: bold;
    color: #444;
}
#calculadora {
    display: none;
    max-width: 700px;
    margin: 0 auto 20px auto;
    padding: 20px;
    background: #fff;
    border-radius: 8px;
}
.cabecalho-rodape {
    margin-bottom: 15px;
    font-size: 14px;
    color: #444;
    font-weight: bold;
}
.question {
    display: flex;
    justify-content: space-between;
    margin: 8px 0;
}
.question label {
    flex: 1;
}
.question input {
    width: 60px;
}
.botoes {
    margin: 20px 0;
    display: flex;
    justify-content: center;
    gap: 10px;
}
button {
    padding: 10px 20px;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
#calcularBtn { background: #007bff; }
#limparBtn { background: #cc0000; }
.resultado-box {
    margin-top: 20px;
    background: #fafafa;
    padding: 12px;
    border-radius: 5px;
    text-align: left;
    white-space: pre-wrap;
}
.alerta-synchro {
    background: #ffcccc;
    color: #990000;
    font-weight: bold;
}
</style>
</head>
<body>

<header id="splash-header">
    <h1>SYNCHRO</h1>
    <img class="logo" src="https://i.imgur.com/1oY9JmI.jpeg" alt="logo synchro" onclick="abrirCalculadora()">
    <h2>Score Emocional</h2>
</header>

<div id="calculadora">
  <div class="cabecalho-rodape">
      Gilberto Moreira<br>
      Psicanalista Clínico – CBO 2515-50
  </div>

  <h2>SC – Simulador de Coerência</h2>
  <p style="font-size:14px; text-align:center; color:#555;">*Autoavaliação de 0 a 10*</p>

  <div class="question"><label for="q1">Q1 – Organização do Ambiente:</label><input type="number" id="q1" min="0" max="10"></div>
  <div class="question"><label for="q2">Q2 – Cumprimento da Agenda:</label><input type="number" id="q2" min="0" max="10"></div>
  <div class="question"><label for="q3">Q3 – Postura Diante de Problema:</label><input type="number" id="q3" min="0" max="10"></div>
  <div class="question"><label for="q4">Q4 – Pausa antes de Reagir:</label><input type="number" id="q4" min="0" max="10"></div>
  <div class="question"><label for="q5">Q5 – Nível de Ansiedade:</label><input type="number" id="q5" min="0" max="10"></div>
  <div class="question"><label for="q6">Q6 – Nível de Paz Interna:</label><input type="number" id="q6" min="0" max="10"></div>
  <div class="question"><label for="q7">Q7 – Estrutura Emocional:</label><input type="number" id="q7" min="0" max="10"></div>
  <div class="question"><label for="q8">Q8 – Nível do Humor Atual:</label><input type="number" id="q8" min="0" max="10"></div>

  <div class="botoes">
      <button id="calcularBtn" onclick="calcularSC()">Calcular SC</button>
      <button id="limparBtn" onclick="limpar()">Limpar</button>
  </div>

  <div id="resultado" class="resultado-box"></div>
</div>

<script>
function abrirCalculadora() {
    document.getElementById('calculadora').style.display = 'block';
    document.getElementById('splash-header').style.display = 'none';
}

function limitarValor(campo) {
    let v = parseInt(campo.value);
    if (v > 10) campo.value = 10;
    if (v < 0 || isNaN(v)) campo.value = "";
}

document.querySelectorAll("input[type=number]").forEach(c => {
    c.addEventListener("input", () => limitarValor(c));
});

function calcularSC() {
    const valores = [];
    let msgs = [];
    let baixaCoerencia = false;
    const nomesPerguntas = [
        "Q1 – Organização do Ambiente",
        "Q2 – Cumprimento da Agenda",
        "Q3 – Postura Diante de Problema",
        "Q4 – Pausa antes de Reagir",
        "Q5 – Nível de Ansiedade",
        "Q6 – Nível de Paz Interna",
        "Q7 – Estrutura Emocional",
        "Q8 – Nível do Humor Atual"
    ];

    for (let i = 1; i <= 8; i++) {
        let input = document.getElementById("q" + i);
        let v = input.value;
        let v_num = Number(v);
        if (v === "" || v_num < 0 || v_num > 10 || isNaN(v_num)) {
            alert("Preencha todas as notas entre 0 e 10.");
            return;
        }
        valores.push(v_num);
        if (v_num < 7) {
            baixaCoerencia = true;
            msgs.push(nomesPerguntas[i-1]);
        }
    }

    let media = (valores.reduce((a,b)=>a+b,0)/8).toFixed(1);
    const resultadoBox = document.getElementById("resultado");
    resultadoBox.className = 'resultado-box';

    if (baixaCoerencia) {
        resultadoBox.classList.add('alerta-synchro');
        let feedbackPerguntas = msgs.length === 1 ?
            `Sua autoavaliação mostra a incoerência no ponto:\n • ${msgs[0]}.` :
            `Sua autoavaliação mostra incoerência em ${msgs.length} pontos (ex: ${msgs[0]}...).`;
        resultadoBox.innerText = `Sua nota SC: ${media}\n\n${feedbackPerguntas}\n\nORIENTAÇÃO SC: Inicie sua Synchroterapia para o Reajuste Emocional!`;
    } else {
        resultadoBox.innerText = "Sua nota SC: "+media+"\n\nParabéns! Sua coerência está alta. Mantenha o ritmo do Método SYNCHRO.";
    }
}

function limpar() {
    document.querySelectorAll("input").forEach(i=>i.value="");
    const resultadoBox = document.getElementById("resultado");
    resultadoBox.innerText="";
    resultadoBox.className = 'resultado-box';
}
</script>
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log('Service Worker registrado com sucesso!'))
    .catch(err => console.log('Erro ao registrar Service Worker:', err));
}
</script>
</body>
</html>